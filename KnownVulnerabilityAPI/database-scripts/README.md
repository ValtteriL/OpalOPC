# Database scripts

Index CPE dictionary into SQLite
Allow searching for best match CPE by a version string

Indexed database is ~1.2GB
Indexing takes ~5minutes (plus moving to repo)

Uses the following data:

- NIST CPE dictionary: [https://nvd.nist.gov/feeds/xml/cpe/dictionary/official-cpe-dictionary_v2.3.xml.gz](https://nvd.nist.gov/feeds/xml/cpe/dictionary/official-cpe-dictionary_v2.3.xml.gz)

## Getting started

### Install dependencies

```bash
sudo apt install perl-doc cpanminus libssl-dev build-essential libz-dev
sudo cpanm Carton
carton install
```

### Index data

These are meant to be run with Ansible, but here are the commands:

```bash
carton exec perl index.pl <path_to_cpe_dictionary_file> <database_path>
```

### Query

```bash
carton exec perl query.pl cpe.db '<place query here>'
```
